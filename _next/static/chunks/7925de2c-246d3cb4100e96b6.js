"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[768],{9933:(e,t,i)=>{i.d(t,{KB:()=>$});var r=i(1105),a=i(1014),s=i(8597),l=i(5148),n=i(2434),o=i(7654),h=i(2120),u=i(6736),c=i(3452),d=i(2383),b=i(3853),f=i(5590);function g(e,t,i){if(t<i)throw Error("Required at least "+i+" arguments for "+e+" but got "+t)}function p(e,t,i){if(g(e,t,i),t%i!=0)throw Error("Arguments for "+e+" must be in pairs of "+i)}function v(e){if(0===e||1===e)return e;throw Error("Flag must be 0 or 1")}function y(e,t){for(;!e.interactive||t(e);)if(e._parent)e=e._parent;else break}function _(e){let t=document.createElement("canvas");t.width=1,t.height=1;let i=t.getContext("2d",{willReadFrequently:!0});i.drawImage(e,0,0,1,1);try{return i.getImageData(0,0,1,1),!1}catch(t){return console.warn('Image "'+e.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function m(e){e.width=0,e.height=0,e.style.width="0px",e.style.height="0px"}function w(e){return Math.floor(e)+.5}class x{constructor(){Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0})}get x(){return this._x}get y(){return this._y}set x(e){this._x=e}set y(e){this._y=e}}class O extends n.O_{constructor(e){super(),Object.defineProperty(this,"_layer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"interactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inactive",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"wheelable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"cancelTouch",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isMeasured",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"buttonMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"compoundAlpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"angle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"crisp",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"pivot",{enumerable:!0,configurable:!0,writable:!0,value:new x}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cursorOverStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_replacedCursorStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new s.u}),Object.defineProperty(this,"_matrix",{enumerable:!0,configurable:!0,writable:!0,value:new s.u}),Object.defineProperty(this,"_uMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new s.u}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._renderer=e}subStatus(e){return{inactive:null==this.inactive?e.inactive:this.inactive,layer:this._layer||e.layer}}_dispose(){this._renderer._removeObject(this),this.getLayer().dirty=!0}getCanvas(){return this.getLayer().view}getLayer(){let e=this;for(;;){if(e._layer)return e._layer;if(!e._parent)return this._renderer.defaultLayer;e=e._parent}}setLayer(e,t){null==e?this._layer=void 0:(this._layer=this._renderer.getLayer(e,!0),this._layer.visible=!0,this._layer.margin=t,t&&h.Dt(this._layer.view,!1),this._renderer._ghostLayer.setMargin(this._renderer.layers),this._parent&&this._parent.registerChildLayer(this._layer),this._layer.dirty=!0,this._renderer.resizeLayer(this._layer),this._renderer.resizeGhost())}markDirtyLayer(){this.getLayer().dirty=!0}clear(){this.invalidateBounds()}invalidateBounds(){this._localBounds=void 0}_addBounds(e){}_getColorId(){return void 0===this._colorId&&(this._colorId=this._renderer.paintId(this)),this._colorId}_isInteractive(e){return!e.inactive&&(this.interactive||this._renderer._forceInteractive>0)}_isInteractiveMask(e){return this._isInteractive(e)}contains(e){for(;;){if(e===this)return!0;if(!e._parent)return!1;e=e._parent}}toGlobal(e){return this._matrix.apply(e)}toLocal(e){return this._matrix.applyInverse(e)}getLocalMatrix(){return this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._uMatrix}getLocalBounds(){return this._localBounds||(this._localBounds={left:1e7,top:1e7,right:-1e7,bottom:-1e7},this._addBounds(this._localBounds)),this._localBounds}getAdjustedBounds(e){this._setMatrix();let t=this.getLocalMatrix(),i=t.apply({x:e.left,y:e.top}),r=t.apply({x:e.right,y:e.top}),a=t.apply({x:e.right,y:e.bottom}),s=t.apply({x:e.left,y:e.bottom});return{left:Math.min(i.x,r.x,a.x,s.x),top:Math.min(i.y,r.y,a.y,s.y),right:Math.max(i.x,r.x,a.x,s.x),bottom:Math.max(i.y,r.y,a.y,s.y)}}on(e,t,i){return this.interactive?this._renderer._addEvent(this,e,t,i):new n.W_(()=>{})}_setMatrix(){this._localMatrix.setTransform(this.x,this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._matrix.copyFrom(this._localMatrix),this._parent&&this._matrix.prepend(this._parent._matrix)}_transform(e,t){let i=this._matrix,r=i.tx*t,a=i.ty*t;this.crisp&&(r=w(r),a=w(a)),e.setTransform(i.a*t,i.b*t,i.c*t,i.d*t,r,a)}_transformMargin(e,t,i){let r=this._matrix;e.setTransform(r.a*t,r.b*t,r.c*t,r.d*t,(r.tx+i.left)*t,(r.ty+i.top)*t)}_transformLayer(e,t,i){i.margin?this._transformMargin(e,i.scale||t,i.margin):this._transform(e,i.scale||t)}render(e,t=0){if(this.visible&&(!1!==this.exportable||!this._renderer._omitTainted)){this._setMatrix();let i=this.subStatus(e),r=this._renderer.resolution,a=this._renderer.layers,s=this._renderer._ghostLayer,l=s.context,n=this.mask;n&&n._setMatrix(),u.__(a,e=>{if(e){let t=e.context;t.save(),n&&(n._transformLayer(t,r,e),n._runPath(t),t.clip()),t.globalAlpha=this.compoundAlpha*this.alpha,this._transformLayer(t,r,e),this.filter&&(t.filter=this.filter)}}),l.save(),n&&this._isInteractiveMask(i)&&(n._transformMargin(l,r,s.margin),n._runPath(l),l.clip()),this._transformMargin(l,r,s.margin),i.layer.order>0&&!t&&u.Cy(this._renderer._deferredGhostLayers,i.layer.order),this._render(i,t),l.restore(),u.__(a,e=>{e&&e.context.restore()})}}_render(e,t=0){!1===this.exportable&&(e.layer.tainted=!0)}_ghostOnly(e=0){return e>0}_drawGhost(e,t=0){let i=this._isInteractive(e),r=e.layer.order||0;return!!i&&(0==r&&!this._ghostOnly(t)||r==t)}hovering(){return this._renderer._hovering.has(this)}dragging(){return this._renderer._dragging.some(e=>e.value===this)}shouldCancelTouch(){let e=this._renderer;return(!e.tapToActivate||!!e._touchActive)&&(!!this.cancelTouch||!!this._parent&&this._parent.shouldCancelTouch())}}class P extends O{constructor(){super(...arguments),Object.defineProperty(this,"interactiveChildren",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_childLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_isInteractiveMask(e){return this.interactiveChildren||super._isInteractiveMask(e)}addChild(e){e._parent=this,this._children.push(e),e._layer&&this.registerChildLayer(e._layer)}addChildAt(e,t){e._parent=this,this._children.splice(t,0,e),e._layer&&this.registerChildLayer(e._layer)}removeChild(e){e._parent=void 0,u.dm(this._children,e)}_render(e,t){super._render(e);let i=this._renderer;this.interactive&&this.interactiveChildren&&++i._forceInteractive,u.__(this._children,i=>{i.compoundAlpha=this.compoundAlpha*this.alpha,i.render(e,t)}),this.interactive&&this.interactiveChildren&&--i._forceInteractive}registerChildLayer(e){this._childLayers||(this._childLayers=[]),u.JJ(this._childLayers,e),this._parent&&this._parent.registerChildLayer(e)}markDirtyLayer(e=!1){super.markDirtyLayer(),e&&this._childLayers&&u.__(this._childLayers,e=>e.dirty=!0)}_dispose(){super._dispose(),this._childLayers&&u.__(this._childLayers,e=>{e.dirty=!0})}}function j(e,t){e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.right=Math.max(e.right,t.x),e.bottom=Math.max(e.bottom,t.y)}class B{colorize(e,t){}colorizeGhost(e,t){this.colorize(e,t)}path(e){}pathGhost(e){this.path(e)}addBounds(e){}}class C extends B{colorize(e,t){e.beginPath()}}class k extends B{constructor(e){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){void 0!==t?e.fillStyle=t:e.fillStyle=this.color}}class S extends B{constructor(e){super(),Object.defineProperty(this,"clearShadow",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.fill(),this.clearShadow&&(e.shadowColor="",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}}class T extends B{colorize(e,t){e.stroke()}}class L extends B{constructor(e,t,i,r){super(),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"lineJoin",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"lineCap",{enumerable:!0,configurable:!0,writable:!0,value:r})}colorize(e,t){void 0!==t?e.strokeStyle=t:e.strokeStyle=this.color,e.lineWidth=this.width,this.lineJoin&&(e.lineJoin=this.lineJoin),this.lineCap&&(e.lineCap=this.lineCap)}}class A extends B{constructor(e){super(),Object.defineProperty(this,"dash",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.setLineDash(this.dash)}}class M extends B{constructor(e){super(),Object.defineProperty(this,"dashOffset",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.lineDashOffset=this.dashOffset}}class E extends B{constructor(e,t,i,r){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(e){e.rect(this.x,this.y,this.width,this.height)}addBounds(e){let t=this.x,i=this.y,r=t+this.width,a=i+this.height;j(e,{x:t,y:i}),j(e,{x:r,y:i}),j(e,{x:t,y:a}),j(e,{x:r,y:a})}}class I extends B{constructor(e,t,i){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:i})}path(e){e.moveTo(this.x+this.radius,this.y),e.arc(this.x,this.y,this.radius,0,2*Math.PI)}addBounds(e){j(e,{x:this.x-this.radius,y:this.y-this.radius}),j(e,{x:this.x+this.radius,y:this.y+this.radius})}}class D extends B{constructor(e,t,i,r){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"radiusX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radiusY",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(e){e.ellipse(0,0,this.radiusX,this.radiusY,0,0,2*Math.PI)}addBounds(e){j(e,{x:this.x-this.radiusX,y:this.y-this.radiusY}),j(e,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}class z extends B{constructor(e,t,i,r,a,s){super(),Object.defineProperty(this,"cx",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cy",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"endAngle",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"anticlockwise",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(e){this.radius>0&&e.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}addBounds(e){let t=b.Ki(this.cx,this.cy,this.startAngle*b.iR,this.endAngle*b.iR,this.radius);j(e,{x:t.left,y:t.top}),j(e,{x:t.right,y:t.bottom})}}class R extends B{constructor(e,t,i,r,a){super(),Object.defineProperty(this,"x1",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y1",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"x2",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"y2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:a})}path(e){this.radius>0&&e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}addBounds(e){}}class Y extends B{constructor(e,t){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t})}path(e){e.lineTo(this.x,this.y)}addBounds(e){j(e,{x:this.x,y:this.y})}}class W extends B{constructor(e,t){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t})}path(e){e.moveTo(this.x,this.y)}addBounds(e){j(e,{x:this.x,y:this.y})}}class H extends B{path(e){e.closePath()}}class X extends B{constructor(e,t,i,r,a,s){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"cpX2",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"cpY2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(e){e.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}addBounds(e){j(e,{x:this.cpX,y:this.cpY}),j(e,{x:this.cpX2,y:this.cpY2}),j(e,{x:this.toX,y:this.toY})}}class G extends B{constructor(e,t,i,r){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(e){e.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}addBounds(e){j(e,{x:this.cpX,y:this.cpY}),j(e,{x:this.toX,y:this.toY})}}class V extends B{constructor(e,t,i,r,a){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"blur",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"offsetY",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,writable:!0,value:a})}colorize(e,t){this.opacity&&(e.fillStyle=this.color),e.shadowColor=this.color,e.shadowBlur=this.blur,e.shadowOffsetX=this.offsetX,e.shadowOffsetY=this.offsetY}colorizeGhost(e,t){}}class q extends B{constructor(e,t,i,r,a){super(),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:a})}path(e){e.drawImage(this.image,this.x,this.y,this.width,this.height)}addBounds(e){j(e,{x:this.x,y:this.y}),j(e,{x:this.width,y:this.height})}}class F extends O{constructor(){super(...arguments),Object.defineProperty(this,"_operations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"blendMode",{enumerable:!0,configurable:!0,writable:!0,value:r.N.NORMAL}),Object.defineProperty(this,"_hasShadows",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_fillAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}clear(){super.clear(),this._operations.length=0}_pushOp(e){this._operations.push(e)}beginFill(e,t=1){this._fillAlpha=t,e?e instanceof a.Q1?this._pushOp(new k(e.toCSS(t))):(this.isMeasured=!0,this._pushOp(new k(e))):this._pushOp(new k("rgba(0, 0, 0, "+t+")"))}endFill(){this._pushOp(new S(this._hasShadows))}endStroke(){this._pushOp(new T)}beginPath(){this._pushOp(new C)}lineStyle(e=0,t,i=1,r,s){this._strokeAlpha=i,t?t instanceof a.Q1?this._pushOp(new L(e,t.toCSS(i),r,s)):this._pushOp(new L(e,t,r,s)):this._pushOp(new L(e,"rgba(0, 0, 0, "+i+")",r,s))}setLineDash(e){this._pushOp(new A(e||[]))}setLineDashOffset(e=0){this._pushOp(new M(e))}drawRect(e,t,i,r){this._pushOp(new E(e,t,i,r))}drawCircle(e,t,i){this._pushOp(new I(e,t,i))}drawEllipse(e,t,i,r){this._pushOp(new D(e,t,i,r))}arc(e,t,i,r,a,s=!1){this._pushOp(new z(e,t,i,r,a,s))}arcTo(e,t,i,r,a){this._pushOp(new R(e,t,i,r,a))}lineTo(e,t){this._pushOp(new Y(e,t))}moveTo(e,t){this._pushOp(new W(e,t))}bezierCurveTo(e,t,i,r,a,s){this._pushOp(new X(e,t,i,r,a,s))}quadraticCurveTo(e,t,i,r){this._pushOp(new G(e,t,i,r))}closePath(){this._pushOp(new H)}shadow(e,t=0,i=0,r=0,a){this._hasShadows=!0,this._pushOp(new V(a?e.toCSS(a):e.toCSS(this._fillAlpha||this._strokeAlpha),t,i,r))}image(e,t,i,r,a){this._pushOp(new q(e,t,i,r,a))}svgPath(e){let t,i=0,r=0,a=null,s=null,l=null,n=null,o=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,h=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g;for(;null!==(t=o.exec(e));){let e=t[1],o=t[2],c=[];for(;null!==(t=h.exec(o));)c.push(t[1]);switch("S"!==e&&"s"!==e&&"C"!==e&&"c"!==e&&(a=null,s=null),"Q"!==e&&"q"!==e&&"T"!==e&&"t"!==e&&(l=null,n=null),e){case"M":p(e,c.length,2),i=+c[0],r=+c[1],this.moveTo(i,r);for(let e=2;e<c.length;e+=2)i=+c[e],r=+c[e+1],this.lineTo(i,r);break;case"m":p(e,c.length,2),i+=+c[0],r+=+c[1],this.moveTo(i,r);for(let e=2;e<c.length;e+=2)i+=+c[e],r+=+c[e+1],this.lineTo(i,r);break;case"L":p(e,c.length,2);for(let e=0;e<c.length;e+=2)i=+c[e],r=+c[e+1],this.lineTo(i,r);break;case"l":p(e,c.length,2);for(let e=0;e<c.length;e+=2)i+=+c[e],r+=+c[e+1],this.lineTo(i,r);break;case"H":g(e,c.length,1);for(let e=0;e<c.length;++e)i=+c[e],this.lineTo(i,r);break;case"h":g(e,c.length,1);for(let e=0;e<c.length;++e)i+=+c[e],this.lineTo(i,r);break;case"V":g(e,c.length,1);for(let e=0;e<c.length;++e)r=+c[e],this.lineTo(i,r);break;case"v":g(e,c.length,1);for(let e=0;e<c.length;++e)r+=+c[e],this.lineTo(i,r);break;case"C":p(e,c.length,6);for(let e=0;e<c.length;e+=6){let t=+c[e],l=+c[e+1];a=+c[e+2],s=+c[e+3],i=+c[e+4],r=+c[e+5],this.bezierCurveTo(t,l,a,s,i,r)}break;case"c":p(e,c.length,6);for(let e=0;e<c.length;e+=6){let t=+c[e]+i,l=+c[e+1]+r;a=+c[e+2]+i,s=+c[e+3]+r,i+=+c[e+4],r+=+c[e+5],this.bezierCurveTo(t,l,a,s,i,r)}break;case"S":p(e,c.length,4),(null===a||null===s)&&(a=i,s=r);for(let e=0;e<c.length;e+=4){let t=2*i-a,l=2*r-s;a=+c[e],s=+c[e+1],i=+c[e+2],r=+c[e+3],this.bezierCurveTo(t,l,a,s,i,r)}break;case"s":p(e,c.length,4),(null===a||null===s)&&(a=i,s=r);for(let e=0;e<c.length;e+=4){let t=2*i-a,l=2*r-s;a=+c[e]+i,s=+c[e+1]+r,i+=+c[e+2],r+=+c[e+3],this.bezierCurveTo(t,l,a,s,i,r)}break;case"Q":p(e,c.length,4);for(let e=0;e<c.length;e+=4)l=+c[e],n=+c[e+1],i=+c[e+2],r=+c[e+3],this.quadraticCurveTo(l,n,i,r);break;case"q":p(e,c.length,4);for(let e=0;e<c.length;e+=4)l=+c[e]+i,n=+c[e+1]+r,i+=+c[e+2],r+=+c[e+3],this.quadraticCurveTo(l,n,i,r);break;case"T":p(e,c.length,2),(null===l||null===n)&&(l=i,n=r);for(let e=0;e<c.length;e+=2)l=2*i-l,n=2*r-n,i=+c[e],r=+c[e+1],this.quadraticCurveTo(l,n,i,r);break;case"t":p(e,c.length,2),(null===l||null===n)&&(l=i,n=r);for(let e=0;e<c.length;e+=2)l=2*i-l,n=2*r-n,i+=+c[e],r+=+c[e+1],this.quadraticCurveTo(l,n,i,r);break;case"A":case"a":let d="a"===e;!function(e){for(let t=0;t<e.length;t+=7){let i=t+3,r=e[i];if(r.length>1){let t=/^([01])([01])(.*)$/.exec(r);null!==t&&(e.splice(i,0,t[1]),++i,e.splice(i,0,t[2]),++i,t[3].length>0?e[i]=t[3]:e.splice(i,1))}if((r=e[++i]).length>1){let t=/^([01])(.+)$/.exec(r);null!==t&&(e.splice(i,0,t[1]),e[++i]=t[2])}}}(c),p(e,c.length,7);for(let e=0;e<c.length;e+=7){let t=+c[e+5],a=+c[e+6];d&&(t+=i,a+=r);let s=(0,f.A)({px:i,py:r,rx:+c[e],ry:+c[e+1],xAxisRotation:+c[e+2],largeArcFlag:v(+c[e+3]),sweepFlag:v(+c[e+4]),cx:t,cy:a});u.__(s,e=>{this.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y),i=e.x,r=e.y})}break;case"Z":case"z":!function(e,t,i){if(0!==t)throw Error("Required 0 arguments for "+e+" but got "+t)}(e,c.length,0),this.closePath()}}}_runPath(e){e.beginPath(),u.__(this._operations,t=>{t.path(e)})}_render(e,t=0){super._render(e);let i=e.layer.dirty,r=this._isInteractive(e),a=this._ghostOnly(t),s=this._drawGhost(e,t);if(i||r||a){let t;let r=e.layer.context,l=this._renderer._ghostLayer.context;i&&!a&&(r.globalCompositeOperation=this.blendMode,r.beginPath()),s&&(l.beginPath(),t=this._getColorId()),u.__(this._operations,e=>{i&&!a&&(e.path(r),e.colorize(r,void 0)),s&&(e.pathGhost(l),e.colorizeGhost(l,t))})}}renderDetached(e){if(this.visible){this._setMatrix(),e.save();let t=this.mask;t&&(t._setMatrix(),t._transform(e,1),t._runPath(e),e.clip()),e.globalAlpha=this.compoundAlpha*this.alpha,this._transform(e,1),this.filter&&(e.filter=this.filter),e.globalCompositeOperation=this.blendMode,e.beginPath(),u.__(this._operations,t=>{t.path(e),t.colorize(e,void 0)}),e.restore()}}_addBounds(e){this.visible&&this.isMeasured&&u.__(this._operations,t=>{t.addBounds(e)})}}class N extends O{constructor(e,t,i){super(e),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"textVisible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"truncated",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_textInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),this.text=t,this.style=i}invalidateBounds(){super.invalidateBounds(),this._textInfo=void 0}_shared(e){this.style.textAlign&&(e.textAlign=this.style.textAlign),this.style.direction&&(e.direction=this.style.direction),this.style.textBaseline&&(e.textBaseline=this.style.textBaseline)}_prerender(e,t=!1,i=!1){super._render(e);let r=e.layer.context,s=this._renderer._ghostLayer.context,l=this.style,n=this._getFontStyle(void 0,i);r.font=n,this._isInteractive(e)&&!t&&(s.font=n),l.fill&&(l.fill instanceof a.Q1?r.fillStyle=l.fill.toCSS(void 0!=l.fillOpacity?l.fillOpacity:1):r.fillStyle=l.fill),l.shadowColor&&(e.layer.context.shadowColor=l.shadowColor.toCSS(l.shadowOpacity||1)),l.shadowBlur&&(e.layer.context.shadowBlur=l.shadowBlur),l.shadowOffsetX&&(e.layer.context.shadowOffsetX=l.shadowOffsetX),l.shadowOffsetY&&(e.layer.context.shadowOffsetY=l.shadowOffsetY),this._shared(r),this._isInteractive(e)&&!t&&(s.fillStyle=this._getColorId(),this._shared(s))}_getFontStyle(e,t=!1){let i=this.style,r=[];return e&&e.fontVariant?r.push(e.fontVariant):i.fontVariant&&r.push(i.fontVariant),!t&&(e&&e.fontWeight?r.push(e.fontWeight):i.fontWeight&&r.push(i.fontWeight)),e&&e.fontStyle?r.push(e.fontStyle):i.fontStyle&&r.push(i.fontStyle),e&&e.fontSize?(d.Et(e.fontSize)&&(e.fontSize=e.fontSize+"px"),r.push(e.fontSize)):i.fontSize&&(d.Et(i.fontSize)&&(i.fontSize=i.fontSize+"px"),r.push(i.fontSize)),e&&e.fontFamily?r.push(e.fontFamily):i.fontFamily?r.push(i.fontFamily):r.length&&r.push("Arial"),r.join(" ")}_render(e,t=0){if(this._textInfo||this._measure(e),this.textVisible){let i=this._isInteractive(e),r=e.layer.context,s=e.layer.dirty,l=this._renderer._ghostLayer.context,n=this._ghostOnly(t),h=this._drawGhost(e,t);r.save(),l.save(),this._prerender(e),u.__(this._textInfo,(t,c)=>{u.__(t.textChunks,(u,c)=>{if(u.style&&(r.save(),l.save(),n||(r.font=u.style),this._isInteractive(e)&&(l.font=u.style)),u.fill&&(r.save(),n||(r.fillStyle=u.fill.toCSS())),s&&!n&&r.fillText(u.text,u.offsetX,t.offsetY+u.offsetY),"underline"==u.textDecoration||"line-through"==u.textDecoration){let e,i=1,s=1,l=u.height;if(["truncate","wrap","wrap-no-break"].indexOf(this.style.oversizedBehavior||"")>-1){let e=this._measureText(u.text,r);u.width=e.actualBoundingBoxLeft+e.actualBoundingBoxRight}let h=u.offsetX;switch(this.style.textAlign){case"right":case"end":h-=u.width;break;case"center":h-=u.width/2}if(u.style)switch(o.g.getTextStyle(u.style).fontWeight){case"bolder":case"bold":case"700":case"800":case"900":i=2}l&&(s=l/20),e="line-through"==u.textDecoration?i+t.offsetY+u.offsetY-u.height/2:i+1.5*s+t.offsetY+u.offsetY,n||(r.save(),r.beginPath(),u.fill?r.strokeStyle=u.fill.toCSS():this.style.fill&&this.style.fill instanceof a.Q1&&(r.strokeStyle=this.style.fill.toCSS()),r.lineWidth=i*s,r.moveTo(h,e),r.lineTo(h+u.width,e),r.stroke(),r.restore())}i&&this.interactive&&h&&l.fillText(u.text,u.offsetX,t.offsetY+u.offsetY),u.fill&&r.restore(),u.style&&(r.restore(),l.restore())})}),r.restore(),l.restore()}}_addBounds(e){if(this.visible&&this.isMeasured){let t=this._measure({inactive:this.inactive,layer:this.getLayer()});j(e,{x:t.left,y:t.top}),j(e,{x:t.right,y:t.bottom})}}_ignoreFontWeight(){return/apple/i.test(navigator.vendor)}_measure(e){let t;let i=e.layer.context,r=this._renderer._ghostLayer.context,a="rtl"==this.style.direction;this._textInfo=[];let s=this.style.oversizedBehavior,n=this.style.maxWidth,c=d.Et(n)&&"truncate"==s,b=d.Et(n)&&("wrap"==s||"wrap-no-break"==s);i.save(),r.save(),this._prerender(e,!0,this._ignoreFontWeight());let f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",g=this.text.toString().replace(/\r/g,"").split(/\n/),p=!0,v=0,y=0,_=0;u.__(g,(e,a)=>{let s;for(s=""==e?[{type:"value",text:""}]:o.g.chunk(e,!1,this.style.ignoreFormatting);s.length>0;){let e,a,g,m,w={offsetY:_,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]},x=this._measureText(f,i),O=x.actualBoundingBoxAscent+x.actualBoundingBoxDescent;w.height=O,w.ascent=x.actualBoundingBoxAscent;let P=this.style.textDecoration,j=!1,B=!0,C=[];u.FY(s,(l,u)=>{if("format"==l.type){if("[/]"==l.text)p||(i.restore(),r.restore(),p=!0),a=void 0,t=void 0,g=void 0,P=this.style.textDecoration,m=void 0,e=l.text;else{p||(i.restore(),r.restore());let s=o.g.getTextStyle(l.text),n=this._getFontStyle(s);i.save(),r.save(),i.font=n,t=n,e=l.text,s.textDecoration&&(P=s.textDecoration),s.fill&&(a=s.fill),s.width&&(g=d.Ro(s.width)),s.verticalAlign&&(m=s.verticalAlign),p=!1;let h=this._measureText(f,i),u=h.actualBoundingBoxAscent+h.actualBoundingBoxDescent;u>w.height&&(w.height=u),h.actualBoundingBoxAscent>w.ascent&&(w.ascent=h.actualBoundingBoxAscent)}}else if("value"==l.type&&!j){let r=this._measureText(l.text,i),o=r.actualBoundingBoxLeft+r.actualBoundingBoxRight;if(c){this.truncated=void 0;let e=B||this.style.breakWords||!1,t=this.style.ellipsis||"",r=this._measureText(t,i),a=r.actualBoundingBoxLeft+r.actualBoundingBoxRight;if(w.width+o>n){let r=n-w.width-a;l.text=this._truncateText(i,l.text,r,e),l.text+=t,j=!0,this.truncated=!0}}else if(b&&w.width+o>n){let t=n-w.width,r=this._truncateText(i,l.text,t,!1,B&&"wrap-no-break"!=this.style.oversizedBehavior);if(""==r)return this.textVisible=!0,!1;C=s.slice(u+1),h.Bq(r)!=h.Bq(l.text)&&(C.unshift({type:"value",text:l.text.substr(r.length)}),e&&C.unshift({type:"format",text:e})),l.text=h.Bq(r),s=[],j=!0}let d=1,f=1;if(t&&g&&g>o){let e=o/g;switch(this.style.textAlign){case"right":case"end":d=e;break;case"center":d=e,f=e;break;default:f=e}o=g}let p=r.actualBoundingBoxAscent+r.actualBoundingBoxDescent;p>w.height&&(w.height=p),r.actualBoundingBoxAscent>w.ascent&&(w.ascent=r.actualBoundingBoxAscent),w.width+=o,w.left+=r.actualBoundingBoxLeft/d,w.right+=r.actualBoundingBoxRight/f,w.textChunks.push({style:t,fill:a,text:l.text,width:o,height:p,left:r.actualBoundingBoxLeft,right:r.actualBoundingBoxRight,ascent:r.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:P,verticalAlign:m}),B=!1}return!0}),this.style.lineHeight instanceof l.QE?(w.height*=this.style.lineHeight.value,w.ascent*=this.style.lineHeight.value):(w.height*=this.style.lineHeight||1.2,w.ascent*=this.style.lineHeight||1.2),v<w.left&&(v=w.left),y<w.right&&(y=w.right),this._textInfo.push(w),_+=w.height,s=C||[]}}),p||(i.restore(),r.restore()),u.__(this._textInfo,(e,t)=>{let i=0;u.__(e.textChunks,t=>{if(t.offsetX=i+t.left-e.left,t.offsetY+=e.height-e.height*(this.style.baselineRatio||.19),i+=t.width,t.verticalAlign)switch(t.verticalAlign){case"super":t.offsetY-=e.height/2-t.height/2;break;case"sub":t.offsetY+=t.height/2}})});let m={left:a?-y:-v,top:0,right:a?v:y,bottom:_};if("none"!==s){let e=this._fitRatio(m);if(e<1){if("fit"==s)d.Et(this.style.minScale)&&e<this.style.minScale?(this.textVisible=!1,m.left=0,m.top=0,m.right=0,m.bottom=0):(this._originalScale||(this._originalScale=this.scale),this.scale=e,this.textVisible=!0);else if("hide"==s)this.textVisible=!1,m.left=0,m.top=0,m.right=0,m.bottom=0;else{switch(this.style.textAlign){case"right":case"end":m.left=a?n:-n,m.right=0;break;case"center":m.left=-n/2,m.right=n/2;break;default:m.left=0,m.right=a?-n:n}this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}}else this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}return i.restore(),r.restore(),m}_fitRatio(e){let t=this.style.maxWidth,i=this.style.maxHeight;return d.Et(t)||d.Et(i)?Math.min(t/(e.right-e.left)||1,i/(e.bottom-e.top)||1):1}_truncateText(e,t,i,r=!1,a=!0){let s;do{if(r)t=t.slice(0,-1);else{let e=t.replace(/[^,;:!?\\\/\s​]+[,;:!?\\\/\s​]*$/g,"");if((""==e||e===t)&&a)r=!0;else if(""==e)break;else t=e}let i=this._measureText(t,e);s=i.actualBoundingBoxLeft+i.actualBoundingBoxRight}while(s>i&&""!=t);return t}_measureText(e,t){let i=t.measureText(e),r={};if(null==i.actualBoundingBoxAscent){let t=document.createElement("div");t.innerText=e,t.style.visibility="hidden",t.style.position="absolute",t.style.top="-1000000px;",t.style.fontFamily=this.style.fontFamily||"",t.style.fontSize=this.style.fontSize+"",document.body.appendChild(t);let a=t.getBoundingClientRect();document.body.removeChild(t);let s=a.height,l=i.width;r={actualBoundingBoxAscent:s,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:l,fontBoundingBoxAscent:s,fontBoundingBoxDescent:0,width:l}}else r={actualBoundingBoxAscent:i.actualBoundingBoxAscent,actualBoundingBoxDescent:i.actualBoundingBoxDescent,actualBoundingBoxLeft:i.actualBoundingBoxLeft,actualBoundingBoxRight:i.actualBoundingBoxRight,fontBoundingBoxAscent:i.actualBoundingBoxAscent,fontBoundingBoxDescent:i.actualBoundingBoxDescent,width:i.width};let a=i.width;switch(this.style.textAlign){case"right":case"end":r.actualBoundingBoxLeft=a,r.actualBoundingBoxRight=0;break;case"center":r.actualBoundingBoxLeft=a/2,r.actualBoundingBoxRight=a/2;break;default:r.actualBoundingBoxLeft=0,r.actualBoundingBoxRight=a}return r}}class Q{constructor(){Object.defineProperty(this,"fill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fillOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textAlign",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontVariant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textDecoration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:(0,l.KN)(120)}),Object.defineProperty(this,"baselineRatio",{enumerable:!0,configurable:!0,writable:!0,value:.19}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textBaseline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"oversizedBehavior",{enumerable:!0,configurable:!0,writable:!0,value:"none"}),Object.defineProperty(this,"breakWords",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ellipsis",{enumerable:!0,configurable:!0,writable:!0,value:"…"}),Object.defineProperty(this,"maxWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"minScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreFormatting",{enumerable:!0,configurable:!0,writable:!0,value:!1})}}class J extends N{constructor(){super(...arguments),Object.defineProperty(this,"textType",{enumerable:!0,configurable:!0,writable:!0,value:"circular"}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inside",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"orientation",{enumerable:!0,configurable:!0,writable:!0,value:"auto"}),Object.defineProperty(this,"kerning",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_textReversed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_render(e,t=0){"circular"===this.textType?this._renderCircular(e,t):super._render(e,t)}_renderCircular(e,t=0){if(this.textVisible){this._prerender(e);let i=this._isInteractive(e),r=e.layer.context,a=e.layer.dirty,s=this._renderer._ghostLayer.context;r.save(),i&&s.save(),this._textInfo||this._measure(e);let l=this.radius||0,n=this.startAngle||0,o=0,h=this.orientation,c="auto"==h?"auto":"inward"==h,d=this.inside,f=this.style.textAlign||"left",g=this.kerning||0,p="left"==f?1:-1,v=!this._textReversed,y=this._ghostOnly(t),_=this._drawGhost(e,t);if("auto"==c){let e=0,t=0;u.__(this._textInfo,(t,i)=>{let r=n+-(t.width/(l-t.height)/2*p);r>e&&(e=r)}),t="left"==f?(e+o/2)*b.iR:"right"==f?(e-o/2)*b.iR:n*b.iR,c=(t=b.n0(t))>=270||t<=90}!0==c&&v&&(this._textInfo.reverse(),this._textReversed=!0),u.__(this._textInfo,(e,t)=>{let h=e.height;d||(l+=h),(-1==p&&c||1==p&&!c)&&v&&e.textChunks.reverse();let b=n;o=0,"center"==f&&(b+=-(e.width/(l-h)/2*p),o=b-n),b+=Math.PI*(c?0:1),r.save(),i&&s.save(),y||r.rotate(b),i&&s.rotate(b);let m=0;u.__(e.textChunks,(e,t)=>{let n=e.text,o=e.width;m=o/2/(l-h)*p,y||r.rotate(m),i&&s.rotate(m),e.style&&(r.save(),s.save(),y||(r.font=e.style),i&&(s.font=e.style)),e.fill&&(r.save(),y||(r.fillStyle=e.fill.toCSS())),y||(r.textBaseline="middle",r.textAlign="center"),i&&(s.textBaseline="middle",s.textAlign="center"),a&&!y&&r.fillText(n,0,(c?1:-1)*(0-l+h/2)),i&&_&&s.fillText(n,0,(c?1:-1)*(0-l+h/2)),e.fill&&r.restore(),e.style&&(r.restore(),s.restore()),m=(o/2+g)/(l-h)*p,y||r.rotate(m),i&&s.rotate(m)}),r.restore(),i&&s.restore(),d&&(l-=h)}),r.restore(),i&&s.restore()}}_measure(e){return"circular"===this.textType?this._measureCircular(e):super._measure(e)}_measureCircular(e){let t;let i=e.layer.context,r=this._renderer._ghostLayer.context,a="rtl"==this.style.direction,s=this.style.oversizedBehavior,n=this.style.maxWidth,c=d.Et(n)&&"truncate"==s,b=this.style.ellipsis||"";this.textVisible=!0,this._textInfo=[],this._textReversed=!1,i.save(),r.save(),this._prerender(e,!0);let f=this.text.toString().replace(/\r/g,"").split(/\n/),g=!0,p=0,v=0;return u.__(f,(e,s)=>{let f,y,_,m=o.g.chunk(e,!1,this.style.ignoreFormatting),w={offsetY:v,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};u.__(m,(e,s)=>{if("format"==e.type){if("[/]"==e.text)g||(i.restore(),r.restore(),g=!0),y=void 0,f=void 0,_=void 0;else{let t=o.g.getTextStyle(e.text),a=this._getFontStyle(t);i.save(),r.save(),i.font=a,f=a,t.fill&&(y=t.fill),t.width&&(_=d.Ro(t.width)),g=!1}c&&(t=this._measureText(b,i))}else if("value"==e.type){let r=e.text.match(/./ug)||[];a&&(r=h.SX(e.text)).reverse();for(let e=0;e<r.length;e++){let a=r[e],s=this._measureText(a,i),l=s.width;f&&_&&_>l&&(l=_);let o=s.actualBoundingBoxAscent+s.actualBoundingBoxDescent;if(o>w.height&&(w.height=o),s.actualBoundingBoxAscent>w.ascent&&(w.ascent=s.actualBoundingBoxAscent),p+=l,c){t||(t=this._measureText(b,i));let e=t.actualBoundingBoxLeft+t.actualBoundingBoxRight;if(p+e>n){1==w.textChunks.length?this.textVisible=!1:(w.width+=e,w.left+=t.actualBoundingBoxLeft,w.right+=t.actualBoundingBoxRight,w.textChunks.push({style:f,fill:y,text:b,width:e,height:o+t.actualBoundingBoxDescent,left:t.actualBoundingBoxLeft,right:t.actualBoundingBoxRight,ascent:t.actualBoundingBoxAscent,offsetX:0,offsetY:o,textDecoration:void 0}));break}}w.width+=l,w.left+=s.actualBoundingBoxLeft,w.right+=s.actualBoundingBoxRight,w.textChunks.push({style:f,fill:y,text:a,width:l,height:o+s.actualBoundingBoxDescent,left:s.actualBoundingBoxLeft,right:s.actualBoundingBoxRight,ascent:s.actualBoundingBoxAscent,offsetX:0,offsetY:o,textDecoration:void 0})}}}),this.style.lineHeight instanceof l.QE?w.height*=this.style.lineHeight.value:w.height*=this.style.lineHeight||1.2,this._textInfo.push(w),v+=w.height}),g||(i.restore(),r.restore()),"hide"==s&&p>n&&(this.textVisible=!1),u.__(this._textInfo,e=>{u.__(e.textChunks,t=>{t.offsetY+=Math.round((e.height-t.height+(e.ascent-t.ascent))/2)})}),i.restore(),r.restore(),{left:0,top:0,right:0,bottom:0}}}class Z extends O{constructor(e,t){super(e),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_imageMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.image=t}_dispose(){super._dispose(),this._imageMask&&m(this._imageMask)}getLocalBounds(){if(!this._localBounds){let e=0,t=0;this.width&&(e=this.width),this.height&&(t=this.height),this._localBounds={left:0,top:0,right:e,bottom:t},this._addBounds(this._localBounds)}return this._localBounds}_render(e,t=0){if(super._render(e),this.image){if(void 0===this.tainted&&(this.tainted=_(this.image),e.layer.tainted=!0),this.tainted&&this._renderer._omitTainted)return;let i=this._ghostOnly(t),r=this._drawGhost(e,t);if(e.layer.dirty&&!i){this.shadowColor&&(e.layer.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(e.layer.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&(e.layer.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(e.layer.context.shadowOffsetY=this.shadowOffsetY);let t=this.width||this.image.naturalWidth,i=this.height||this.image.naturalHeight;e.layer.context.drawImage(this.image,0,0,t,i)}if(this.interactive&&this._isInteractive(e)&&r){let e=this._getMask(this.image);this._renderer._ghostLayer.context.drawImage(e,0,0)}}}clear(){super.clear(),this.image=void 0,this._imageMask=void 0}_getMask(e){if(void 0===this._imageMask){let t=this.width||e.naturalWidth,i=this.height||e.naturalHeight,r=document.createElement("canvas");r.width=t,r.height=i;let a=r.getContext("2d");a.imageSmoothingEnabled=!1,a.fillStyle=this._getColorId(),a.fillRect(0,0,t,i),_(e)||(a.globalCompositeOperation="destination-in",a.drawImage(e,0,0,t,i)),this._imageMask=r}return this._imageMask}}class K{constructor(e,t,i,r){Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"originalPoint",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"point",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"bbox",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"simulated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"native",{enumerable:!0,configurable:!0,writable:!0,value:!0}),h.xY("touchevents")&&e instanceof Touch?this.id=e.identifier:this.id=null}}class $ extends n.JZ{constructor(e){if(super(),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"_layerDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_dirtyLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"defaultLayer",{enumerable:!0,configurable:!0,writable:!0,value:this.getLayer(0)}),Object.defineProperty(this,"_ghostLayer",{enumerable:!0,configurable:!0,writable:!0,value:new U}),Object.defineProperty(this,"_deferredGhostLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_patternCanvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"_patternContext",{enumerable:!0,configurable:!0,writable:!0,value:this._patternCanvas.getContext("2d")}),Object.defineProperty(this,"_realWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_realHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_calculatedWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_calculatedHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interactionsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_forceInteractive",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_omitTainted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_hovering",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_dragging",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mousedown",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_lastPointerMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tapToActivate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"tapToActivateTimeout",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"_touchActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_touchActiveTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),null==e?this.resolution=window.devicePixelRatio:this.resolution=e,this.view.style.position="absolute",this.view.setAttribute("aria-hidden","true"),this.view.appendChild(this._layerDom),this._disposers.push(new n.W_(()=>{c.__(this._events,(e,t)=>{t.disposer.dispose()}),u.__(this.layers,e=>{m(e.view),e.exportableView&&m(e.exportableView)}),m(this._ghostLayer.view),m(this._patternCanvas)})),this._disposers.push(h.n_(()=>{null==e&&(this.resolution=window.devicePixelRatio)})),h.xY("touchevents")){let e=e=>{0!==this._dragging.length&&u.FY(this._dragging,t=>!t.value.shouldCancelTouch()||(e.preventDefault(),!1)),this._touchActiveTimeout&&this._delayTouchDeactivate()};this._disposers.push(h.q2(window,"touchstart",e,{passive:!1})),this._disposers.push(h.q2(this.view,"touchstart",e,{passive:!1})),this._disposers.push(h.q2(this.view,"touchmove",()=>{this._touchActiveTimeout&&this._delayTouchDeactivate()},{passive:!0})),this._disposers.push(h.q2(window,"click",e=>{this._touchActive=!1},{passive:!0})),this._disposers.push(h.q2(this.view,"click",e=>{window.setTimeout(()=>{this._touchActive=!0,this._delayTouchDeactivate()},100)},{passive:!0}))}h.xY("wheelevents")&&this._disposers.push(h.q2(this.view,"wheel",e=>{let t=!1;this._hovering.forEach(e=>{if(e.wheelable)return t=!0,!1}),t&&e.preventDefault()},{passive:!1}))}resetImageArray(){this._ghostLayer.imageArray=void 0}_delayTouchDeactivate(){this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout),this.tapToActivateTimeout>0&&(this._touchActiveTimeout=window.setTimeout(()=>{this._touchActive=!1},this.tapToActivateTimeout))}get debugGhostView(){return!!this._ghostLayer.view.parentNode}set debugGhostView(e){e?this._ghostLayer.view.parentNode||this.view.appendChild(this._ghostLayer.view):this._ghostLayer.view.parentNode&&this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view)}createLinearGradient(e,t,i,r){return this.defaultLayer.context.createLinearGradient(e,t,i,r)}createRadialGradient(e,t,i,r,a,s){return this.defaultLayer.context.createRadialGradient(e,t,i,r,a,s)}createPattern(e,t,i,r,a){return this._patternCanvas.width=r,this._patternCanvas.height=a,this._patternContext.clearRect(0,0,r,a),t.renderDetached(this._patternContext),e.renderDetached(this._patternContext),this._patternContext.createPattern(this._patternCanvas,i)}makeContainer(){return new P(this)}makeGraphics(){return new F(this)}makeText(e,t){return new N(this,e,t)}makeTextStyle(){return new Q}makeRadialText(e,t){return new J(this,e,t)}makePicture(e){return new Z(this,e)}resizeLayer(e){e.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resizeGhost(){this._ghostLayer.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resize(e,t,i,r){this._realWidth=e,this._realHeight=t,this._calculatedWidth=i,this._calculatedHeight=r,u.__(this.layers,e=>{e&&(e.dirty=!0,this.resizeLayer(e))}),this.resizeGhost(),this.view.style.width=i+"px",this.view.style.height=r+"px"}createDetachedLayer(e=!1){let t=document.createElement("canvas"),i=t.getContext("2d",{willReadFrequently:e}),r=new ee(t,i);return t.style.position="absolute",t.style.top="0px",t.style.left="0px",r}getLayerByOrder(e){let t=this.layers,i=t.length;for(let r=0;r<i;r++){let i=t[r];if(i.order==e)return i}}getLayer(e,t=!0){let i,r=this.getLayerByOrder(e);if(r)return r;let a=this.createDetachedLayer(99==e);a.order=e,a.visible=t,a.view.className="am5-layer-"+e,a.visible&&this.resizeLayer(a);let s=this.layers;s.push(a),s.sort((e,t)=>e.order>t.order?1:e.order<t.order?-1:0);let l=s.length,n=u.qh(s,a);for(let e=n+1;e<l;e++)if(s[e].visible){i=s[e];break}return a.visible&&(void 0===i?this._layerDom.appendChild(a.view):this._layerDom.insertBefore(a.view,i.view)),a}render(e){this._dirtyLayers.length=0,this._deferredGhostLayers=[],u.__(this.layers,e=>{e&&e.dirty&&e.visible&&(this._dirtyLayers.push(e),e.clear())}),this._ghostLayer.clear(),e.render({inactive:null,layer:this.defaultLayer});let t=this._deferredGhostLayers;if(t.length&&(t.sort((e,t)=>e-t),u.__(t,t=>{e.render({inactive:null,layer:this.defaultLayer},t)})),this._ghostLayer.context.restore(),u.__(this.layers,e=>{if(e){let t=e.context;t.beginPath(),t.moveTo(0,0),t.stroke()}}),u.__(this._dirtyLayers,e=>{e.context.restore(),e.dirty=!1}),this._hovering.size&&this._lastPointerMoveEvent){let{events:e,target:t,native:i}=this._lastPointerMoveEvent;u.__(e,e=>{this._dispatchGlobalMousemove(e,t,i)})}}paintId(e){let t=function(e){let t=[0,0,0];for(let i=0;i<24;i++)t[i%3]<<=1,t[i%3]|=1&e,e>>=1;return(0|t[0])+(t[1]<<8)+(t[2]<<16)}(++this._colorId),i=a.Q1.fromHex(t).toCSS();return this._colorMap[i]=e,i}_removeObject(e){void 0!==e._colorId&&delete this._colorMap[e._colorId]}_adjustBoundingBox(e){let t=this._ghostLayer.margin;return new DOMRect(-t.left,-t.top,e.width+t.left+t.right,e.height+t.top+t.bottom)}getEvent(e,t=!0){let i=this.view.getBoundingClientRect(),r=e.clientX||0,a=e.clientY||0,s=this._calculatedWidth/this._realWidth,l=this._calculatedHeight/this._realHeight;return new K(e,{x:r-i.left,y:a-i.top},{x:(r-(t?i.left:0))*s,y:(a-(t?i.top:0))*l},this._adjustBoundingBox(i))}_getHitTarget(e,t,i){if(0===t.width||0===t.height||e.x<t.left||e.x>t.right||e.y<t.top||e.y>t.bottom||!i||!this._layerDom.contains(i))return;let r=this._ghostLayer.getImageData(e,t);if(0===r.data[0]&&0===r.data[1]&&0===r.data[2])return!1;let s=a.Q1.fromRGB(r.data[0],r.data[1],r.data[2]).toCSS();return this._colorMap[s]}getObjectAtPoint(e){let t=this._ghostLayer.getImageArray(e);if(0===t[0]&&0===t[1]&&0===t[2])return;let i=a.Q1.fromRGB(t[0],t[1],t[2]).toCSS();return this._colorMap[i]}_withEvents(e,t){let i=this._events[e];if(void 0!==i){i.dispatching=!0;try{t(i)}finally{i.dispatching=!1,i.cleanup&&(i.cleanup=!1,u.TW(i.callbacks,e=>!e.disposed),0===i.callbacks.length&&(i.disposer.dispose(),delete this._events[e]))}}}_dispatchEventAll(e,t){this.interactionsEnabled&&this._withEvents(e,e=>{u.__(e.callbacks,e=>{e.disposed||e.callback.call(e.context,t)})})}_dispatchEvent(e,t,i){if(!this.interactionsEnabled)return!1;let r=!1;return this._withEvents(e,e=>{u.__(e.callbacks,e=>{e.disposed||e.object!==t||(e.callback.call(e.context,i),r=!0)})}),r}_dispatchMousedown(e,t){let i=e.button;if(0!=i&&2!=i&&1!=i&&void 0!==i)return;let r=this.getEvent(e),a=this._getHitTarget(r.originalPoint,r.bbox,t);if(a){let e=r.id,t=!1;y(a,i=>{let a={id:e,value:i};return this._mousedown.push(a),!t&&this._dispatchEvent("pointerdown",i,r)&&(t=!0,this._dragging.some(t=>t.value===i&&t.id===e)||this._dragging.push(a)),!0})}}_dispatchGlobalMousemove(e,t,i){let r=this.getEvent(e),a=this._getHitTarget(r.originalPoint,r.bbox,t);r.native=i,a?(this._hovering.forEach(e=>{e.contains(a)||(this._hovering.delete(e),e.cursorOverStyle&&h.eC(document.body,"cursor",e._replacedCursorStyle),this._dispatchEvent("pointerout",e,r))}),r.native&&y(a,e=>(this._hovering.has(e)||(this._hovering.add(e),e.cursorOverStyle&&(e._replacedCursorStyle=h.gd(document.body,"cursor"),h.eC(document.body,"cursor",e.cursorOverStyle)),this._dispatchEvent("pointerover",e,r)),!0))):(this._hovering.forEach(e=>{e.cursorOverStyle&&h.eC(document.body,"cursor",e._replacedCursorStyle),this._dispatchEvent("pointerout",e,r)}),this._hovering.clear()),this._dispatchEventAll("globalpointermove",r)}removeHovering(e){this._hovering.delete(e),e.cursorOverStyle&&h.eC(document.body,"cursor",e._replacedCursorStyle)}_dispatchGlobalMouseup(e,t){let i=this.getEvent(e);i.native=t,this._dispatchEventAll("globalpointerup",i)}_dispatchDragMove(e){if(0!==this._dragging.length){let t=this.getEvent(e),i=t.id;this._dragging.forEach(e=>{e.id===i&&this._dispatchEvent("pointermove",e.value,t)})}}_dispatchDragEnd(e,t){let i;let r=e.button;if(0==r||void 0===r)i="click";else if(2==r)i="rightclick";else{if(1!=r)return;i="middleclick"}let a=this.getEvent(e),s=a.id;if(0!==this._mousedown.length){let e=this._getHitTarget(a.originalPoint,a.bbox,t);e&&this._mousedown.forEach(t=>{t.id===s&&t.value.contains(e)&&this._dispatchEvent(i,t.value,a)}),this._mousedown.length=0}0!==this._dragging.length&&(this._dragging.forEach(e=>{e.id===s&&this._dispatchEvent("pointerup",e.value,a)}),this._dragging.length=0)}_dispatchDoubleClick(e,t){let i=this.getEvent(e),r=this._getHitTarget(i.originalPoint,i.bbox,t);r&&y(r,e=>!this._dispatchEvent("dblclick",e,i))}_dispatchWheel(e,t){let i=this.getEvent(e),r=this._getHitTarget(i.originalPoint,i.bbox,t);r&&y(r,e=>!this._dispatchEvent("wheel",e,i))}_makeSharedEvent(e,t){if(void 0===this._listeners[e]){let i=t();this._listeners[e]=new n.Wr(()=>{delete this._listeners[e],i.dispose()})}return this._listeners[e].increment()}_onPointerEvent(e,t){var i,r;let a=!1,s=null;function l(){s=null,a=!1}return new n.ZT([new n.W_(()=>{null!==s&&clearTimeout(s),l()}),h.q2(this.view,h.wN(e),e=>{a=!0,null!==s&&clearTimeout(s),s=window.setTimeout(l,0)}),(i=window,r=(e,i)=>{null!==s&&(clearTimeout(s),s=null),t(e,i,a),a=!1},h.q2(i,h.wN(e),e=>{let t=h.wt(e),i=e.touches;i?(0==i.length&&(i=e.changedTouches),r(u.C(i),t)):r([e],t)}))])}_initEvent(e){switch(e){case"globalpointermove":case"pointerover":case"pointerout":return this._makeSharedEvent("pointermove",()=>{let e=(e,t,i)=>{this._lastPointerMoveEvent={events:e,target:t,native:i},u.__(e,e=>{this._dispatchGlobalMousemove(e,t,i)})};return new n.ZT([this._onPointerEvent("pointerdown",e),this._onPointerEvent("pointermove",e)])});case"globalpointerup":return this._makeSharedEvent("pointerup",()=>{let e=this._onPointerEvent("pointerup",(e,t,i)=>{u.__(e,e=>{this._dispatchGlobalMouseup(e,i)}),this._lastPointerMoveEvent={events:e,target:t,native:i}}),t=this._onPointerEvent("pointercancel",(e,t,i)=>{u.__(e,e=>{this._dispatchGlobalMouseup(e,i)}),this._lastPointerMoveEvent={events:e,target:t,native:i}});return new n.W_(()=>{e.dispose(),t.dispose()})});case"click":case"rightclick":case"middleclick":case"pointerdown":case"pointermove":case"pointerup":return this._makeSharedEvent("pointerdown",()=>{let e=this._onPointerEvent("pointerdown",(e,t)=>{u.__(e,e=>{this._dispatchMousedown(e,t)})}),t=this._onPointerEvent("pointermove",e=>{u.__(e,e=>{this._dispatchDragMove(e)})}),i=this._onPointerEvent("pointerup",(e,t)=>{u.__(e,e=>{this._dispatchDragEnd(e,t)})}),r=this._onPointerEvent("pointercancel",(e,t)=>{u.__(e,e=>{this._dispatchDragEnd(e,t)})});return new n.W_(()=>{e.dispose(),t.dispose(),i.dispose(),r.dispose()})});case"dblclick":return this._makeSharedEvent("dblclick",()=>this._onPointerEvent("dblclick",(e,t)=>{u.__(e,e=>{this._dispatchDoubleClick(e,t)})}));case"wheel":return this._makeSharedEvent("wheel",()=>h.q2(this.view,h.wN("wheel"),e=>{this._dispatchWheel(e,h.wt(e))},{passive:!1}))}}_addEvent(e,t,i,r){let a=this._events[t];void 0===a&&(a=this._events[t]={disposer:this._initEvent(t),callbacks:[],dispatching:!1,cleanup:!1});let s={object:e,context:r,callback:i,disposed:!1};return a.callbacks.push(s),new n.W_(()=>{s.disposed=!0,a.dispatching?a.cleanup=!0:(u.dm(a.callbacks,s),0===a.callbacks.length&&(a.disposer.dispose(),delete this._events[t]))})}getCanvas(e,t){this.render(e),t||(t={});let i=this.resolution,r=Math.floor(this._calculatedWidth*this.resolution),a=Math.floor(this._calculatedHeight*this.resolution);if(t.minWidth&&t.minWidth>r){let e=t.minWidth/r;e>i&&(i=e*this.resolution)}if(t.minHeight&&t.minHeight>a){let e=t.minHeight/a;e>i&&(i=e*this.resolution)}if(t.maxWidth&&t.maxWidth<r){let e=t.maxWidth/r;e<i&&(i=e*this.resolution)}if(t.maxHeight&&t.maxHeight>a){let e=t.maxHeight/a;e<i&&(i=e*this.resolution)}t.maintainPixelRatio&&(i/=this.resolution);let s=[],l=!1,n=document.createElement("canvas");i!=this.resolution&&(l=!0,r=r*i/this.resolution,a=a*i/this.resolution),n.width=r,n.height=a,n.style.position="fixed",n.style.top="-10000px",this.view.appendChild(n),s.push(n);let o=n.getContext("2d"),h=0,c=0,d=!1;return u.__(this.layers,e=>{if(e&&e.visible&&(e.tainted||l)){d=!0,e.exportableView=e.view,e.exportableContext=e.context,e.view=document.createElement("canvas"),e.view.style.position="fixed",e.view.style.top="-10000px",this.view.appendChild(e.view),s.push(e.view);let t=0,l=0;e.margin&&(t+=e.margin.left||0+e.margin.right||0,l+=e.margin.top||0+e.margin.bottom||0),e.view.width=r+t,e.view.height=a+l,e.context=e.view.getContext("2d"),e.dirty=!0,e.scale=i}}),d&&(this._omitTainted=!0,this.render(e),this._omitTainted=!1),u.__(this.layers,e=>{if(e&&e.visible){let t=0,i=0;e.margin&&(t=-(e.margin.left||0)*this.resolution,i=-(e.margin.top||0)*this.resolution),o.drawImage(e.view,t,i),e.exportableView&&(e.view=e.exportableView,e.exportableView=void 0),e.exportableContext&&(e.context=e.exportableContext,e.exportableContext=void 0),h<e.view.clientWidth&&(h=e.view.clientWidth),c<e.view.clientHeight&&(c=e.view.clientHeight),e.scale=void 0}}),n.style.width=h+"px",n.style.height=c+"px",u.__(s,e=>{e.style.position="",e.style.top="",this.view.removeChild(e)}),n}}class U{constructor(){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"imageArray",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.view=document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.context.imageSmoothingEnabled=!1,this.view.style.position="absolute",this.view.style.top="0px",this.view.style.left="0px"}resize(e,t,i,r,a){this._resolution=a,e+=this.margin.left+this.margin.right,t+=this.margin.top+this.margin.bottom,i+=this.margin.left+this.margin.right,r+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px",this._width=Math.floor(e*a),this._height=Math.floor(t*a),this.view.width=this._width,this.view.style.width=i+"px",this.view.height=this._height,this.view.style.height=r+"px"}getImageData(e,t){return this.context.getImageData(Math.round((e.x-t.left)/t.width*this._width),Math.round((e.y-t.top)/t.height*this._height),1,1)}getImageArray(e){this.imageArray||(this.imageArray=this.context.getImageData(0,0,this._width,this._height).data);let t=this.imageArray,i=Math.round(e.x*this._resolution),r=(Math.round(e.y*this._resolution)*this._width+i)*4;return[t[r],t[r+1],t[r+2],t[r+3]]}setMargin(e){this.margin.left=0,this.margin.right=0,this.margin.top=0,this.margin.bottom=0,u.__(e,e=>{e.margin&&(this.margin.left=Math.max(this.margin.left,e.margin.left),this.margin.right=Math.max(this.margin.right,e.margin.right),this.margin.top=Math.max(this.margin.top,e.margin.top),this.margin.bottom=Math.max(this.margin.bottom,e.margin.bottom))})}clear(){this.context.save(),this.context.fillStyle="#000",this.context.fillRect(0,0,this._width,this._height)}}class ee{constructor(e,t){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dirty",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportableView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exportableContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=e,this.context=t}resize(e,t,i,r,a){null!=this.width&&(e=this.width,i=this.width),null!=this.height&&(t=this.height,r=this.height),this.margin?(e+=this.margin.left+this.margin.right,t+=this.margin.top+this.margin.bottom,i+=this.margin.left+this.margin.right,r+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px"):(this.view.style.left="0px",this.view.style.top="0px"),this._width=Math.floor(e*a),this._height=Math.floor(t*a),this.view.width=this._width,this.view.style.width=i+"px",this.view.height=this._height,this.view.style.height=r+"px"}clear(){this.context.save(),this.context.clearRect(0,0,this._width,this._height)}}}}]);